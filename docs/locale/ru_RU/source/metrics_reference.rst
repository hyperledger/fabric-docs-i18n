Справочник по метрикам
======================

Метрики ordering-службы
-----------------------

Prometheus
~~~~~~~~~~

Следующие метрики ordering-службы экспортируются для использования в Prometheus.

+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| Название                                     | Тип       | Описание                                                                             | Labels (метки) |  |
+==============================================+===========+======================================================================================+================+==+
| blockcutter_block_fill_duration              | histogram | Время с first transaction enqueing to the block                                      | channel        |  |
|                                              |           | being cut в секундах.                                                                |                |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| broadcast_enqueue_duration                   | histogram | Время, нужное, чтобы поставить транзакцию в очередь в секундах.                      | channel        |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
|                                              |           |                                                                                      | type           |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
|                                              |           |                                                                                      | status         |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| broadcast_processed_count                    | counter   | Число обработанных транзакций.                                                       | channel        |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
|                                              |           |                                                                                      | type           |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
|                                              |           |                                                                                      | status         |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| broadcast_validate_duration                  | histogram | Время, нужное, чтобы проверить транзакцию в секундах.                                | channel        |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
|                                              |           |                                                                                      | type           |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
|                                              |           |                                                                                      | status         |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| cluster_comm_egress_queue_capacity           | gauge     | Вместимость egress queue (очереди выхода).                                           | host           |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
|                                              |           |                                                                                      | msg_type       |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
|                                              |           |                                                                                      | channel        |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| cluster_comm_egress_queue_length             | gauge     | Длина egress queue.                                                                  | host           |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
|                                              |           |                                                                                      | msg_type       |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
|                                              |           |                                                                                      | channel        |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| cluster_comm_egress_queue_workers            | gauge     | Счетчик egress queue workers.                                                        | channel        |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| cluster_comm_egress_stream_count             | gauge     | Счетчик потоков к другим узлам.                                                      | channel        |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| cluster_comm_egress_tls_connection_count     | gauge     | Счетчик TLS-соединений с другими узлами.                                             |                |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| cluster_comm_ingress_stream_count            | gauge     | Счетчик потоков от других узлов.                                                     |                |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| cluster_comm_msg_dropped_count               | counter   | Счетчик отброшенных сообщений.                                                       | host           |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
|                                              |           |                                                                                      | channel        |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| cluster_comm_msg_send_time                   | histogram | Время, нужное, чтобы послать сообщение в секундах.                                   | host           |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
|                                              |           |                                                                                      | channel        |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| consensus_etcdraft_active_nodes              | gauge     | Число активных узлов в этом канале.                                                  | channel        |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| consensus_etcdraft_cluster_size              | gauge     | Число узлов в этом канале.                                                           | channel        |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| consensus_etcdraft_committed_block_number    | gauge     | Block number последнего сохраненного блока.                                          | channel        |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| consensus_etcdraft_config_proposals_received | counter   | Итоговое число proposal'ов                                                           | channel        |  |
|                                              |           | конфигурационного типа.                                                              |                |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| consensus_etcdraft_data_persist_duration     | histogram | Время, необходимое для сохранения данных etcd/raft                                   | channel        |  |
|                                              |           | в хранилище (в секундах).                                                            |                |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| consensus_etcdraft_is_leader                 | gauge     | Статус лидерства текущего узла: 1, если он                                           | channel        |  |
|                                              |           | лидер, иначе 0.                                                                      |                |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| consensus_etcdraft_leader_changes            | counter   | Число изменения лидера со старта процесса.                                           | channel        |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| consensus_etcdraft_normal_proposals_received | counter   | Итоговое число proposals, полученных для транзакций                                  | channel        |  |
|                                              |           | обычного типа.                                                                       |                |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| consensus_etcdraft_proposal_failures         | counter   | Число proposal failures.                                                             | channel        |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| consensus_etcdraft_snapshot_block_number     | gauge     | Block number последнего snapshot'а.                                                  | channel        |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| consensus_kafka_batch_size                   | gauge     | Средний размер пакета в байтах, посланного в тему (topic).                           | topic          |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| consensus_kafka_compression_ratio            | gauge     | Средняя степень сжатия (как процент) для темы.                                       | topic          |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| consensus_kafka_incoming_byte_rate           | gauge     | Байт, считанных с брокеров в секунду.                                                | broker_id      |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| consensus_kafka_last_offset_persisted        | gauge     | Смещение (offset), указаное в метаданных последнего сохраненного блока               | channel        |  |
|                                              |           |                                                                                      |                |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| consensus_kafka_outgoing_byte_rate           | gauge     | Байт, записанных в брокеры, в секунду.                                               | broker_id      |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| consensus_kafka_record_send_rate             | gauge     | Число записей, посланных в темы, в секунду.                                          | topic          |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| consensus_kafka_records_per_request          | gauge     | Среднее число записей в темы на запрос.                                              | topic          |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| consensus_kafka_request_latency              | gauge     | Сердняя задержка на запрос к брокерам в миллисекундах.                               | broker_id      |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| consensus_kafka_request_rate                 | gauge     | Количество запросов, посланных брокерам, в секунду.                                  | broker_id      |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| consensus_kafka_request_size                 | gauge     | Средний размер запроса к брокерам в байтах.                                          | broker_id      |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| consensus_kafka_response_rate                | gauge     | Количество ответов от брокеров в секунду.                                            | broker_id      |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| consensus_kafka_response_size                | gauge     | Средний размер ответа от брокеров в байтах.                                          | broker_id      |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| deliver_blocks_sent                          | counter   | Число блоков, отправленных deliver-службой.                                          | channel        |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
|                                              |           |                                                                                      | filtered       |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
|                                              |           |                                                                                      | data_type      |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| deliver_requests_completed                   | counter   | Число завершенных запросов к deliver-службе.                                         | channel        |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
|                                              |           |                                                                                      | filtered       |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
|                                              |           |                                                                                      | data_type      |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
|                                              |           |                                                                                      | success        |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| deliver_requests_received                    | counter   | Число полученных ответов от deliver-службы.                                          | channel        |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
|                                              |           |                                                                                      | filtered       |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
|                                              |           |                                                                                      | data_type      |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| deliver_streams_closed                       | counter   | Число GRPC-потоков, закрытых у deliver-службы.                                       |                |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| deliver_streams_opened                       | counter   | Число GRPC streams that have been opened for the                                     |                |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| fabric_version                               | gauge     | Используемая версия Fabric.                                                          | version        |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| grpc_comm_conn_closed                        | counter   | Кол-во закрытых gRPC-соединений. Открытые минус закрытые это                         |                |  |
|                                              |           | число активных соединений.                                                           |                |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| grpc_comm_conn_opened                        | counter   | Кол-во открытых gRPC-соединений. Открытые минус закрытые это                         |                |  |
|                                              |           | число активных соединений.                                                           |                |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| grpc_server_stream_messages_received         | counter   | Число полученных сообщений потоков.                                                  | service        |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
|                                              |           |                                                                                      | method         |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| grpc_server_stream_messages_sent             | counter   | Число отправленных сообщений потоков.                                                | service        |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
|                                              |           |                                                                                      | method         |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| grpc_server_stream_request_duration          | histogram | Время, нужное, чтобы выполнить запрос потока.                                        | service        |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
|                                              |           |                                                                                      | method         |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
|                                              |           |                                                                                      | code           |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| grpc_server_stream_requests_completed        | counter   | Число выполненных запросов потоков.                                                  | service        |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
|                                              |           |                                                                                      | method         |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
|                                              |           |                                                                                      | code           |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| grpc_server_stream_requests_received         | counter   | Число полученных запросов потоков.                                                   | service        |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
|                                              |           |                                                                                      | method         |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| grpc_server_unary_request_duration           | histogram | Время, нужное, чтобы выполнить unary-запрос.                                         | service        |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
|                                              |           |                                                                                      | method         |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
|                                              |           |                                                                                      | code           |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| grpc_server_unary_requests_completed         | counter   | Число выполненных unary-запросов.                                                    | service        |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
|                                              |           |                                                                                      | method         |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
|                                              |           |                                                                                      | code           |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| grpc_server_unary_requests_received          | counter   | Число полученных unary-запросов.                                                     | service        |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
|                                              |           |                                                                                      | method         |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| ledger_blockchain_height                     | gauge     | Высота блокчейна в блоках.                                                           | channel        |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| ledger_blockstorage_commit_time              | histogram | Время, нужное для сохранения блока в хранилище в секундах.                           | channel        |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| logging_entries_checked                      | counter   | Число записей лога (журнала), проверяемых соответственно текущему уровню логирования | level          |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+
| logging_entries_written                      | counter   | Число записываемых записей лога (log entries that are written)                       | level          |  |
+----------------------------------------------+-----------+--------------------------------------------------------------------------------------+----------------+--+

StatsD
~~~~~~

Следующие метрики ordering-службы выводятся для использования в StatsD.
Обозначение ``%{variable_name}`` обозначает части названия bucket'а, зависящие от контекста.

Например, ``%{channel}`` будет заменен названием канала, соответствующего метрике.

+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| Bucket                                                                    | Тип       | Описание                                                                             |
+===========================================================================+===========+======================================================================================+
| blockcutter.block_fill_duration.%{channel}                                | histogram | Время с first transaction enqueing to the block                                      |
|                                                                           |           | being cut в секундах.                                                                |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| broadcast.enqueue_duration.%{channel}.%{type}.%{status}                   | histogram | Время, нужное, чтобы поставить транзакцию в очередь в секундах.                      |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| broadcast.processed_count.%{channel}.%{type}.%{status}                    | counter   | Число обработанных транзакций.                                                       |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| broadcast.validate_duration.%{channel}.%{type}.%{status}                  | histogram | Время, нужное, чтобы проверить транзакцию в секундах.                                |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| cluster.comm.egress_queue_capacity.%{host}.%{msg_type}.%{channel}         | gauge     | Вместимость egress queue.                                                            |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| cluster.comm.egress_queue_length.%{host}.%{msg_type}.%{channel}           | gauge     | Длина egress queue.                                                                  |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| cluster.comm.egress_queue_workers.%{channel}                              | gauge     | Счетчик egress queue workers.                                                        |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| cluster.comm.egress_stream_count.%{channel}                               | gauge     | Счетчик потоков к другим узлам.                                                      |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| cluster.comm.egress_tls_connection_count                                  | gauge     | Счетчик TLS-соединений с другими узлами.                                             |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| cluster.comm.ingress_stream_count                                         | gauge     | Счетчик потоков от других узлов.                                                     |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| cluster.comm.msg_dropped_count.%{host}.%{channel}                         | counter   | Счетчик отброшенных сообщений.                                                       |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| cluster.comm.msg_send_time.%{host}.%{channel}                             | histogram | Время, нужное, чтобы послать сообщение в секундах.                                   |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| consensus.etcdraft.active_nodes.%{channel}                                | gauge     | Число активных узлов в этом канале.                                                  |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| consensus.etcdraft.cluster_size.%{channel}                                | gauge     | Число узлов в этом канале.                                                           |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| consensus.etcdraft.committed_block_number.%{channel}                      | gauge     | Block number последнего сохраненного блока.                                          |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| consensus.etcdraft.config_proposals_received.%{channel}                   | counter   | Итоговое число proposal'ов                                                           |
|                                                                           |           | конфигурационного типа.                                                              |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| consensus.etcdraft.data_persist_duration.%{channel}                       | histogram | Время, необходимое для сохранения данных etcd/raft                                   |
|                                                                           |           | в хранилище (в секундах).                                                            |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| consensus.etcdraft.is_leader.%{channel}                                   | gauge     | Статус лидерства текущего узла: 1, если он                                           |
|                                                                           |           | лидер, иначе 0.                                                                      |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| consensus.etcdraft.leader_changes.%{channel}                              | counter   | Число изменения лидера со старта процесса.                                           |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| consensus.etcdraft.normal_proposals_received.%{channel}                   | counter   | Итоговое число proposals, полученных для транзакций                                  |
|                                                                           |           | обычного типа.                                                                       |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| consensus.etcdraft.proposal_failures.%{channel}                           | counter   | Число proposal failures.                                                             |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| consensus.etcdraft.snapshot_block_number.%{channel}                       | gauge     | Block number последнего snapshot'а.                                                  |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| consensus.kafka.batch_size.%{topic}                                       | gauge     | Средний размер пакета в байтах, посланного в тему (topic).                           |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| consensus.kafka.compression_ratio.%{topic}                                | gauge     | Средняя степень сжатия (как процент) для темы.                                       |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| consensus.kafka.incoming_byte_rate.%{broker_id}                           | gauge     | Байт, считанных с брокеров, в секунду.                                               |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| consensus.kafka.last_offset_persisted.%{channel}                          | gauge     | Смещение (offset), указаное в метаданных последнего сохраненного блока               |
|                                                                           |           |                                                                                      |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| consensus.kafka.outgoing_byte_rate.%{broker_id}                           | gauge     | Байт, записанных в брокеры, в секунду.                                               |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| consensus.kafka.record_send_rate.%{topic}                                 | gauge     | Число записей, посланных в темы, в секунду.                                          |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| consensus.kafka.records_per_request.%{topic}                              | gauge     | Среднее число записей в темы на запрос.                                              |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| consensus.kafka.request_latency.%{broker_id}                              | gauge     | Сердняя задержка на запрос к брокерам в миллисекундах.                               |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| consensus.kafka.request_rate.%{broker_id}                                 | gauge     | Количество запросов, посланных брокерам, в секунду.                                  |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| consensus.kafka.request_size.%{broker_id}                                 | gauge     | Средний размер запроса к брокерам в байтах.                                          |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| consensus.kafka.response_rate.%{broker_id}                                | gauge     | Количество ответов от брокеров в секунду.                                            |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| consensus.kafka.response_size.%{broker_id}                                | gauge     | Средний размер ответа от брокеров в байтах.                                          |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| deliver.blocks_sent.%{channel}.%{filtered}.%{data_type}                   | counter   | Число блоков, отправленных deliver-службой.                                          |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| deliver.requests_completed.%{channel}.%{filtered}.%{data_type}.%{success} | counter   | Число завершенных запросов к deliver-службе.                                         |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| deliver.requests_received.%{channel}.%{filtered}.%{data_type}             | counter   | Число полученных ответов от deliver-службы.                                          |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| deliver.streams_closed                                                    | counter   | Число GRPC-потоков, закрытых у deliver-службы.                                       |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| deliver.streams_opened                                                    | counter   | Число GRPC streams that have been opened for the                                     |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| fabric_version.%{version}                                                 | gauge     | Используемая версия Fabric.                                                          |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| grpc.comm.conn_closed                                                     | counter   | Кол-во закрытых gRPC-соединений. Открытые минус закрытые это                         |
|                                                                           |           | число активных соединений.                                                           |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| grpc.comm.conn_opened                                                     | counter   | Кол-во открытых gRPC-соединений. Открытые минус закрытые это                         |
|                                                                           |           | число активных соединений.                                                           |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| grpc.server.stream_messages_received.%{service}.%{method}                 | counter   | Число полученных сообщений потоков.                                                  |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| grpc.server.stream_messages_sent.%{service}.%{method}                     | counter   | Число отправленных сообщений потоков.                                                |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| grpc.server.stream_request_duration.%{service}.%{method}.%{code}          | histogram | Время, нужное, чтобы выполнить запрос потока.                                        |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| grpc.server.stream_requests_completed.%{service}.%{method}.%{code}        | counter   | Число выполненных запросов потоков.                                                  |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| grpc.server.stream_requests_received.%{service}.%{method}                 | counter   | Число полученных запросов потоков.                                                   |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| grpc.server.unary_request_duration.%{service}.%{method}.%{code}           | histogram | Время, нужное, чтобы выполнить unary-запрос.                                         |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| grpc.server.unary_requests_completed.%{service}.%{method}.%{code}         | counter   | Число выполненных unary-запросов.                                                    |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| grpc.server.unary_requests_received.%{service}.%{method}                  | counter   | Число полученных unary-запросов.                                                     |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| ledger.blockchain_height.%{channel}                                       | gauge     | Высота блокчейна в блоках.                                                           |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| ledger.blockstorage_commit_time.%{channel}                                | histogram | Время, нужное для сохранения блока в хранилище в секундах.                           |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| logging.entries_checked.%{level}                                          | counter   | Число записей лога (журнала), проверяемых соответственно текущему уровню логирования |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+
| logging.entries_written.%{level}                                          | counter   | Число записываемых записей лога (log entries that are written)                       |
+---------------------------------------------------------------------------+-----------+--------------------------------------------------------------------------------------+

Peer Metrics
------------

Prometheus
~~~~~~~~~~

The following peer metrics are exported for consumption by Prometheus.
Следующие метрики пира экспортируются для использования в Prometheus.

+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| Name                                                | Type      | Description                                                                                              | Labels           |  |
+=====================================================+===========+==========================================================================================================+==================+==+
| chaincode_execute_timeouts                          | counter   | Число выполнений чейнкода (Init или Invoke), которые                                                     | chaincode        |  |
|                                                     |           | превысили интервал ожидания.                                                                             |                  |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| chaincode_launch_duration                           | histogram | Время, нужное, чтобы запустить чейнкод.                                                                  | chaincode        |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | success          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| chaincode_launch_failures                           | counter   | Число запусков чейнкода, завершившихся ошибкой.                                                          | chaincode        |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| chaincode_launch_timeouts                           | counter   | Число запусков чейнкода, которые превысили интервал ожидания.                                            | chaincode        |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| chaincode_shim_request_duration                     | histogram | Время, нужное, чтобы выполнить shim-запросы чейнкода.                                                    | type             |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | channel          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | chaincode        |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | success          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| chaincode_shim_requests_completed                   | counter   | Число выполненных shim-запросов чейнкода.                                                                | type             |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | channel          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | chaincode        |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | success          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| chaincode_shim_requests_received                    | counter   | Число полученных shim-запросов чейнкода.                                                                 | type             |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | channel          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | chaincode        |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| couchdb_processing_time                             | histogram | Время, нужное функции, чтобы выполнить запрос                                                            | database         |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | function_name    |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | result           |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| deliver_blocks_sent                                 | counter   | Число блоков, отправленных deliver-службой.                                                              | channel          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | filtered         |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | data_type        |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| deliver_requests_completed                          | counter   | Число завершенных запросов к deliver-службе.                                                             | channel          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | filtered         |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | data_type        |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | success          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| deliver_requests_received                           | counter   | Число полученных ответов от deliver-службы.                                                              | channel          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | filtered         |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | data_type        |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| deliver_streams_closed                              | counter   | Число GRPC-потоков, закрытых у deliver-службы.                                                           |                  |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| deliver_streams_opened                              | counter   | Число GRPC streams that have been opened for the                                                         |                  |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| dockercontroller_chaincode_container_build_duration | histogram | Время, нужное, чтобы собрать docker-image с чейнкодом в секундах.                                        | chaincode        |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | success          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| endorser_chaincode_instantiation_failures           | counter   | Число завершившихся ошибкой запусков или обновлений чейнкода                                             | channel          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | chaincode        |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| endorser_duplicate_transaction_failures             | counter   | Число завершившихся ошибкой proposals из-за дублированного transaction ID                                | channel          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | chaincode        |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| endorser_endorsement_failures                       | counter   | Число завершившихся ошибкой подтверждений (endorsements).                                                | channel          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | chaincode        |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | chaincodeerror   |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| endorser_proposal_acl_failures                      | counter   | Число proposals, проавливших проверки ACL.                                                               | channel          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | chaincode        |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| endorser_proposal_duration                          | histogram | Время, нужное, чтобы завершить proposal.                                                                 | channel          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | chaincode        |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | success          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| endorser_proposal_simulation_failures               | counter   | Число завершившихся ошибкой симуляций proposal'ов                                                        | channel          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | chaincode        |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| endorser_proposal_validation_failures               | counter   | Число proposals, проваливших первоначальную проверку.                                                    |                  |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| endorser_proposals_received                         | counter   | Число полученных proposals.                                                                              |                  |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| endorser_successful_proposals                       | counter   | Число удачных proposals.                                                                                 |                  |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| fabric_version                                      | gauge     | Используемая версия Fabric.                                                                              | version          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| gossip_comm_messages_received                       | counter   | Число полученных сообщений.                                                                              |                  |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| gossip_comm_messages_sent                           | counter   | Число отправленных сообщений.                                                                            |                  |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| gossip_comm_overflow_count                          | counter   | Число исходящих переполнений буффера очереди                                                             |                  |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| gossip_leader_election_leader                       | gauge     | Является ли пир лидером (1) или подписчиком (0).                                                         | channel          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| gossip_membership_total_peers_known                 | gauge     | Общее количество известных пиров                                                                         | channel          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| gossip_payload_buffer_size                          | gauge     | Размер буффера полезной нагрузки (payload)                                                               | channel          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| gossip_privdata_commit_block_duration               | histogram | Время, требующееся для сохранения конфиденциальных данных и                                              | channel          |  |
|                                                     |           | соответствующего блока (в секундах).                                                                     |                  |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| gossip_privdata_fetch_duration                      | histogram | Время, требующееся для извлечения (fetch) отсутствующих конфиденциальных данных из пиров (в секундах)    | channel          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| gossip_privdata_list_missing_duration               | histogram | Время, требующееся для перечисления отсутствующих конфиденциальных данных (в секундах)                   | channel          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| gossip_privdata_pull_duration                       | histogram | Время, требующееся для извлечения (pull) отсутствующего элемента конфиденциальных данных (в секундах)    | channel          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| gossip_privdata_purge_duration                      | histogram | Время, требующееся для чистки конфиденциальных данных (в секундах)                                       | channel          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| gossip_privdata_reconciliation_duration             | histogram | Время, требующееся для for выполнения согласования (reconciliation) конфиденциальных данных (в секундах) | channel          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| gossip_privdata_retrieve_duration                   | histogram | Время, требующееся для извлечения (retrieve) отсутствующих элементов конфиденциальных данных             | channel          |  |
|                                                     |           | из реестра (в секундах)                                                                                  |                  |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| gossip_privdata_send_duration                       | histogram | Время, требующееся для отправки отсутствующего элемента конфиденциальных данных (в секундах)             | channel          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| gossip_privdata_validation_duration                 | histogram | Время, требующееся для валидации блока (в секундах).                                                     | channel          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| gossip_state_commit_duration                        | histogram | Время, требующееся для сохранения блока в секундах                                                       | channel          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| gossip_state_height                                 | gauge     | Текущая высота реестра (ledger height)                                                                   | channel          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| grpc_comm_conn_closed                               | counter   | Кол-во закрытых gRPC-соединений. Открытые минус закрытые это                                             |                  |  |
|                                                     |           | число активных соединений.                                                                               |                  |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| grpc_comm_conn_opened                               | counter   | Кол-во открытых gRPC-соединений. Открытые минус закрытые это                                             |                  |  |
|                                                     |           | число активных соединений.                                                                               |                  |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| grpc_server_stream_messages_received                | counter   | Число полученных сообщений потоков.                                                                      | service          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | method           |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| grpc_server_stream_messages_sent                    | counter   | Число отправленных сообщений потоков.                                                                    | service          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | method           |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| grpc_server_stream_request_duration                 | histogram | Время, нужное, чтобы выполнить запрос потока.                                                            | service          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | method           |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | code             |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| grpc_server_stream_requests_completed               | counter   | Число выполненных запросов потоков.                                                                      | service          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | method           |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | code             |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| grpc_server_stream_requests_received                | counter   | Число полученных запросов потоков.                                                                       | service          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | method           |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| grpc_server_unary_request_duration                  | histogram | Время, нужное, чтобы выполнить unary-запрос.                                                             | service          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | method           |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | code             |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| grpc_server_unary_requests_completed                | counter   | Число выполненных unary-запросов.                                                                        | service          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | method           |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | code             |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| grpc_server_unary_requests_received                 | counter   | Число полученных unary-запросов.                                                                         | service          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | method           |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| ledger_block_processing_time                        | histogram | Время для обработки блока реестра в секундах.                                                            | channel          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| ledger_blockchain_height                            | gauge     | Высота блокчейна в блоках.                                                                               | channel          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| ledger_blockstorage_and_pvtdata_commit_time         | histogram | Время для сохранения конфиденциальных данных и данных блока                                              | channel          |  |
|                                                     |           | в хранилище (в секундах).                                                                                |                  |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| ledger_blockstorage_commit_time                     | histogram | Время, нужное для сохранения блока в хранилище в секундах.                                               | channel          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| ledger_statedb_commit_time                          | histogram | Время, нужное для сохранения изменений блока                                                             | channel          |  |
|                                                     |           | в базу данных состояния (state db).                                                                      |                  |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| ledger_transaction_count                            | counter   | Число обработанных транзакций.                                                                           | channel          |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | transaction_type |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | chaincode        |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
|                                                     |           |                                                                                                          | validation_code  |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| logging_entries_checked                             | counter   | Число записей лога (журнала), проверяемых соответственно текущему уровню логирования                     | level            |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+
| logging_entries_written                             | counter   | Число записываемых записей лога (log entries that are written)                                           | level            |  |
+-----------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+------------------+--+

StatsD
~~~~~~

Следующие метрики пира выводятся для использования в StatsD.
Обозначение ``%{variable_name}`` обозначает части названия bucket'а, зависящие от контекста.

Например, ``%{channel}`` будет заменен названием канала, соответствующего метрике.

+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| Bucket                                                                                  | Type      | Description                                                                                              |
+=========================================================================================+===========+==========================================================================================================+
| chaincode.execute_timeouts.%{chaincode}                                                 | counter   | Число выполнений чейнкода (Init или Invoke), которые                                                     |
|                                                                                         |           | превысили интервал ожидания.                                                                             |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| chaincode.launch_duration.%{chaincode}.%{success}                                       | histogram | Время, нужное, чтобы запустить чейнкод.                                                                  |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| chaincode.launch_failures.%{chaincode}                                                  | counter   | Число запусков чейнкода, завершившихся ошибкой.                                                          |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| chaincode.launch_timeouts.%{chaincode}                                                  | counter   | Число запусков чейнкода, которые превысили интервал ожидания.                                            |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| chaincode.shim_request_duration.%{type}.%{channel}.%{chaincode}.%{success}              | histogram | Время, нужное, чтобы выполнить shim-запросы чейнкода.                                                    |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| chaincode.shim_requests_completed.%{type}.%{channel}.%{chaincode}.%{success}            | counter   | Число выполненных shim-запросов чейнкода.                                                                |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| chaincode.shim_requests_received.%{type}.%{channel}.%{chaincode}                        | counter   | Число полученных shim-запросов чейнкода.                                                                 |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| couchdb.processing_time.%{database}.%{function_name}.%{result}                          | histogram | Время, нужное функции, чтобы выполнить запрос                                                            |
|                                                                                         |           | к CouchDB, в секундах.                                                                                   |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| deliver.blocks_sent.%{channel}.%{filtered}.%{data_type}                                 | counter   | Число блоков, отправленных deliver-службой.                                                              |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| deliver.requests_completed.%{channel}.%{filtered}.%{data_type}.%{success}               | counter   | Число завершенных запросов к deliver-службе.                                                             |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| deliver.requests_received.%{channel}.%{filtered}.%{data_type}                           | counter   | Число полученных ответов от deliver-службы.                                                              |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| deliver.streams_closed                                                                  | counter   | Число GRPC-потоков, закрытых у deliver-службы.                                                           |
|                                                                                         |           |                                                                                                          |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| deliver.streams_opened                                                                  | counter   | Число GRPC streams that have been opened for the                                                         |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| dockercontroller.chaincode_container_build_duration.%{chaincode}.%{success}             | histogram | Время, нужное, чтобы собрать docker-image с чейнкодом в секундах.                                        |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| endorser.chaincode_instantiation_failures.%{channel}.%{chaincode}                       | counter   | Число завершившихся ошибкой запусков или обновлений чейнкода                                             |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| endorser.duplicate_transaction_failures.%{channel}.%{chaincode}                         | counter   | Число завершившихся ошибкой proposals из-за дублированного transaction ID                                |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| endorser.endorsement_failures.%{channel}.%{chaincode}.%{chaincodeerror}                 | counter   | Число завершившихся ошибкой подтверждений (endorsements).                                                |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| endorser.proposal_acl_failures.%{channel}.%{chaincode}                                  | counter   | Число proposals, проваливших проверки ACL.                                                               |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| endorser.proposal_duration.%{channel}.%{chaincode}.%{success}                           | histogram | Время, нужное, чтобы завершить proposal.                                                                 |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| endorser.proposal_simulation_failures.%{channel}.%{chaincode}                           | counter   | Число завершившихся ошибкой симуляций proposal'ов                                                        |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| endorser.proposal_validation_failures                                                   | counter   | Число proposals, проваливших первоначальную проверку.                                                    |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| endorser.proposals_received                                                             | counter   | Число полученных proposals.                                                                              |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| endorser.successful_proposals                                                           | counter   | Число удачных proposals.                                                                                 |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| fabric_version.%{version}                                                               | gauge     | Используемая версия Fabric.                                                                              |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| gossip.comm.messages_received                                                           | counter   | Число полученных сообщений.                                                                              |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| gossip.comm.messages_sent                                                               | counter   | Число отправленных сообщений.                                                                            |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| gossip.comm.overflow_count                                                              | counter   | Число исходящих переполнений буффера очереди.                                                            |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| gossip.leader_election.leader.%{channel}                                                | gauge     | Является ли пир лидером (1) или подписчиком (0).                                                         |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| gossip.membership.total_peers_known.%{channel}                                          | gauge     | Общее количество известных пиров.                                                                        |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| gossip.payload_buffer.size.%{channel}                                                   | gauge     | Размер буффера полезной нагрузки (payload).                                                              |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| gossip.privdata.commit_block_duration.%{channel}                                        | histogram | Время, требующееся для сохранения конфиденциальных данных и                                              |
|                                                                                         |           | соответствующего блока (в секундах)                                                                      |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| gossip.privdata.fetch_duration.%{channel}                                               | histogram | Время, требующееся для извлечения (fetch) отсутствующих конфиденциальных данных из пиров (в секундах)    |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| gossip.privdata.list_missing_duration.%{channel}                                        | histogram | Время, требующееся для перечисления отсутствующих конфиденциальных данных (в секундах)                   |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| gossip.privdata.pull_duration.%{channel}                                                | histogram | Время, требующееся для извлечения (pull) отсутствующего элемента конфиденциальных данных (в секундах)    |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| gossip.privdata.purge_duration.%{channel}                                               | histogram | Время, требующееся для чистки конфиденциальных данных (в секундах)                                       |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| gossip.privdata.reconciliation_duration.%{channel}                                      | histogram | Время, требующееся для for выполнения согласования (reconciliation) конфиденциальных данных (в секундах) |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| gossip.privdata.retrieve_duration.%{channel}                                            | histogram | Время, требующееся для извлечения (retrieve) отсутствующих элементов конфиденциальных данных             |
|                                                                                         |           | из реестра (в секундах)                                                                                  |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| gossip.privdata.send_duration.%{channel}                                                | histogram | Время, требующееся для отправки отсутствующего элемента конфиденциальных данных (в секундах)             |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| gossip.privdata.validation_duration.%{channel}                                          | histogram | Время, требующееся для валидации блока (в секундах).                                                     |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| gossip.state.commit_duration.%{channel}                                                 | histogram | Время, требующееся для сохранения блока в секундах                                                       |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| gossip.state.height.%{channel}                                                          | gauge     | Текущая высота реестра (ledger height)                                                                   |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| grpc.comm.conn_closed                                                                   | counter   | Кол-во закрытых gRPC-соединений. Открытые минус закрытые это                                             |
|                                                                                         |           | число активных соединений                                                                                |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| grpc.comm.conn_opened                                                                   | counter   | Кол-во открытых gRPC-соединений. Открытые минус закрытые это                                             |
|                                                                                         |           | число активных соединений.                                                                               |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| grpc.server.stream_messages_received.%{service}.%{method}                               | counter   | Число полученных сообщений потоков.                                                                      |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| grpc.server.stream_messages_sent.%{service}.%{method}                                   | counter   | Число отправленных сообщений потоков.                                                                    |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| grpc.server.stream_request_duration.%{service}.%{method}.%{code}                        | histogram | Время, нужное, чтобы выполнить запрос потока.                                                            |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| grpc.server.stream_requests_completed.%{service}.%{method}.%{code}                      | counter   | Число выполненных запросов потоков.                                                                      |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| grpc.server.stream_requests_received.%{service}.%{method}                               | counter   | Число полученных запросов потоков.                                                                       |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| grpc.server.unary_request_duration.%{service}.%{method}.%{code}                         | histogram | Время, нужное, чтобы выполнить unary-запрос.                                                             |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| grpc.server.unary_requests_completed.%{service}.%{method}.%{code}                       | counter   | Число выполненных unary-запросов.                                                                        |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| grpc.server.unary_requests_received.%{service}.%{method}                                | counter   | Число полученных unary-запросов.                                                                         |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| ledger.block_processing_time.%{channel}                                                 | histogram | Время для обработки блока реестра в секундах.                                                            |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| ledger.blockchain_height.%{channel}                                                     | gauge     | Высота блокчейна в блоках.                                                                               |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| ledger.blockstorage_and_pvtdata_commit_time.%{channel}                                  | histogram | Время для сохранения конфиденциальных данных и данных блока                                              |
|                                                                                         |           | в хранилище (в секундах).                                                                                |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| ledger.blockstorage_commit_time.%{channel}                                              | histogram | Время, нужное для сохранения блока в хранилище в секундах.                                               |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| ledger.statedb_commit_time.%{channel}                                                   | histogram | Время, нужное для сохранения изменений блока                                                             |
|                                                                                         |           | в базу данных состояния (state db).                                                                      |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| ledger.transaction_count.%{channel}.%{transaction_type}.%{chaincode}.%{validation_code} | counter   | Число обработанных транзакций.                                                                           |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| logging.entries_checked.%{level}                                                        | counter   | Число записей лога (журнала), проверяемых соответственно текущему уровню логирования                     |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+
| logging.entries_written.%{level}                                                        | counter   | Число записываемых записей лога (log entries that are written)                                           |
+-----------------------------------------------------------------------------------------+-----------+----------------------------------------------------------------------------------------------------------+

.. Licensed under Creative Commons Attribution 4.0 International License
   https://creativecommons.org/licenses/by/4.0/
